<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>  
    <script>
        let stocks = { fruits:["strawberry", "grapes", "banana", "apple"], 
                        liquid:["water", "ice"],
                        holder:["cone", "cup", "stick"],
                        toppings:["chocolate", "peanuts"]
                        } 
        let isShopOpen = true;
        
        const order = (time, work)=>
        {
            return new Promise((resolve, reject) => {

               if (isShopOpen){
                setTimeout (()=>{
                    resolve(work())
                }, time);}

                else{ reject(console.log("our shop is closed"))}
                 
            })
        }
        order(2000, ()=> {console.log((`${stocks.fruits[0]} was selected`))})

       .then(()=>{ return order(2000, ()=>(console.log(`production started`))) }) 
       .then(()=>{return order(2000, ()=>(console.log(`${stocks.fruits[0]} has been choped`)))})
       .then(()=>{return order(1000, ()=>(console.log(`${stocks.liquid[0]} and ${stocks.liquid[1]} was selected`)))})
       .then(()=>{return order(1000, ()=>(console.log(` The machine is starting`)))})
       .then(()=>{return order(2000, ()=>(console.log(`select ${stocks.holder[0]} or ${stocks.holder[1]} or ${stocks.holder[2]}`)))})
       .then(()=>{return order(3000, ()=>(console.log(` ${stocks.toppings[0]} was selected `)))})
       .catch(()=>{console.log("Customer left")})
       .finally(()=>{return order(2000, ()=>{console.log("Thank you, come back next time")})})
    </script>

</body>
</html>